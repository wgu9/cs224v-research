Quick wins（本周可收尾的小改）

- JSON Schema 校验
  - 为 events.jsonl / guards.jsonl / pattern / goal.json 写最小 JSON Schema（docs/），配一个校验脚本（不改主流程）。

- Q1 守卫精准度
  - 严格消费 goal.json.required_tests：TestGuard 验证具体测试名（现仅关键词 pytest）。
  - 显式处理 forbidden_paths：越界时加权或单独标注原因字段（不必改打分公式即可先落 notes）。

- Chat 解析增强（不破坏接口）
  - chat2events 识别 fenced code blocks ```...``` 中的文件路径与多文件列表。
  - 增加测试别名：vitest / pnpm test / yarn test / gradle test / mvn test。

- Q3 路由可用性
  - 在 e2e 脚本允许传入 difficulty=high/low，并将选择记录到日志中（不强制）。
  - profiles 缺失时使用内置默认（pref 未指定→guided）。

- 可观测性与报告
  - 生成 run 级 summary.md：统计 edit 越界数、warn/rollback 次数、受影响文件清单、fix_cmd 汇总。
  - 在 guards.jsonl 末尾追加一行 totals（action 计数与均值 drift）。

- 安全修复辅助
  - 提供可交互的小脚本：读取 guards.jsonl 的 auto_fixable，确认后顺序执行 fix_cmd（dry-run 默认）。

- 模式卡治理
  - 去重与合并：同 pattern_id 多来源时合并 provenance.source_runs 并保留较新 created_at。
  - 检索评分增强：触发词做小写、同义词与子串匹配（保持轻量）。

- 文档与示例
  - 在一个示例 run 的 goal.json 增加 thresholds.warn/rollback，演示 rollback 分支与 fix_cmd。
  - README 增加“一键 Q1 only”命令片段与产物对照表（可选）。

- 脚本与健壮性
  - 统一 CLI 错误提示与退出码；缺文件给出精确路径提示与最小模板示例。
  - 日志打印统一前缀（Step 1/2/3）便于排障。

落地顺序（建议 1 天内完成）
1) 写 4 份 JSON Schema + 校验脚本（docs/ + scripts/validate_schemas.py）
2) required_tests 严格化（守卫）+ forbidden_paths 原因字段（notes）
3) chat2events 支持 fenced blocks 与测试别名
4) run 级 summary.md + totals 行输出（不破坏现有消费）
5) 交互式 auto-fix 脚本（可选）

